<div class="department-form-container">
  <!-- Dialog Header -->
  <div class="dialog-header">
    <h2 mat-dialog-title>
      <mat-icon>{{ isEditMode ? 'edit' : 'business_center' }}</mat-icon>
      {{ isEditMode ? 'Edit Department' : 'Create New Department' }}
    </h2>
    <button 
      mat-icon-button 
      mat-dialog-close
      aria-label="Close dialog">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Form Content -->
  <div mat-dialog-content class="dialog-content">
    <form [formGroup]="departmentForm" (ngSubmit)="onSubmit()">
      
      <!-- Basic Information Section -->
      <div class="form-section">
        <h3 class="section-title">Basic Information</h3>
        
        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field full-width">
            <mat-label>Department Name</mat-label>
            <input 
              matInput 
              formControlName="name"
              placeholder="Enter department name">
            <mat-icon matSuffix>business</mat-icon>
            <mat-error>{{ getErrorMessage('name') }}</mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field full-width">
            <mat-label>Description</mat-label>
            <textarea 
              matInput 
              formControlName="description"
              placeholder="Enter department description"
              rows="3">
            </textarea>
            <mat-icon matSuffix>description</mat-icon>
            <mat-error>{{ getErrorMessage('description') }}</mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- Management Information Section -->
      <div class="form-section">
        <h3 class="section-title">Management & Budget</h3>
        
        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Department Manager</mat-label>
            <mat-select formControlName="manager_id">
              <mat-option value="">No manager assigned</mat-option>
              <mat-option *ngFor="let employee of employees" [value]="employee.id">
                {{ employee.first_name }} {{ employee.last_name }} - {{ employee.role }}
              </mat-option>
            </mat-select>
            <mat-icon matSuffix>person</mat-icon>
            <mat-error>{{ getErrorMessage('manager_id') }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Annual Budget</mat-label>
            <input 
              matInput 
              type="number"
              formControlName="budget"
              placeholder="Enter budget amount">
            <span matTextPrefix>$ </span>
            <mat-icon matSuffix>attach_money</mat-icon>
            <mat-error>{{ getErrorMessage('budget') }}</mat-error>
          </mat-form-field>
        </div>
      </div>
    </form>
  </div>

  <!-- Dialog Actions -->
  <div mat-dialog-actions class="dialog-actions">
    <button 
      mat-button 
      type="button" 
      (click)="onCancel()">
      Cancel
    </button>
    <button 
      mat-raised-button 
      color="primary" 
      [disabled]="loading || departmentForm.invalid"
      (click)="onSubmit()">
      <mat-spinner 
        *ngIf="loading" 
        diameter="20" 
        class="button-spinner">
      </mat-spinner>
      <span>{{ isEditMode ? 'Update' : 'Create' }} Department</span>
    </button>
  </div>
</div>